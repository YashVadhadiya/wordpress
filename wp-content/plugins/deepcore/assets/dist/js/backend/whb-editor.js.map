{"version":3,"sources":["whb-editor.js"],"names":["window","onload","document","body","style","display","$","ready","$currentElement","$currentModalEdit","currentCell","currentRow","currentPanel","$clipboardElem","key","elemUniqueID","$body","$wrap","$sortablePlaces","find","$desktopSortablePlaces","components","Array","isArray","whb_localize","editorComponents","editor_components","frontendComponents","frontend_components","platforms","desktop-view","tablets-view","mobiles-view","importButtonFlag","whbDebug","console","log","whbIsJson","JSON","parse","e","whbIsFrontendBuilder","hasClass","hasOwnProperty","element","search","each","$logo","this","wp","media","attachment","logo","fetch","done","children","attributes","url","$panels","$settings","docHeight","height","whbElementSettings","new_el","arguments","length","undefined","$tabPanels","attr","elemID","elemName","prepend","$fieldInput","fieldStd","type","ajaxurl","data","el_name","remove","append","removeClass","hide","push","name","show","hidden_element","currentElemHtml","editor_icon","uniqueId","whbFieldDependency","fieldName","val","whbModalDraggable","elemEditorIcon","$parent","dependencyData","parentValue","platform_key","$elem","haveDependency","$modalWrap","on","$delImgLink","$this","is","$imgIdInput","$imgContainer","html","removeAttr","frame","$inputNumber","$addImgLink","$numberUnit","$option","unit","event","preventDefault","addClass","num_val","state","get","first","toJSON","$customSelect","closest","css","id","trigger","$icon","value","valueUnit","$iconsWrap","$iconClass","wpColorPicker","placeholder","forcePlaceholderSize","siblings","whbEditorDraggable","connectWith","parseFloat","numberValue","start","start_cell_obj","destroyed","whbCreateFrontendComponents","always","whbSaveAllData","disableSelection","getElementsByClassName","els","i","$el","elem_value","elems","outerHTML","replaceWith","location","pos1","pos2","pos3","pos4","$editor","$actions","clientY","onmouseup","whbCloseModalDraggable","whbElementDrag","clientX","offsetTop","left","offsetLeft","onmousemove","onmousedown","whb_drag_mouse_down","whbInjectScriptToIframe","src","iframeHead","path","getElementsByTagName","myScript","scripts","createElement","$WHBFrontend","screen_key","rowKey","cell","component_key","background-color","border-color","Object","ajax","nonce","stringify","success","color","$newWHBFrontend","el","action","styles","frames","getElementById","innerHTML","contents","assets_url","content","cell_key","alert","whb_data_editor_components","String","_step","_iterator","_createForOfIteratorHelper","confirm","dataType","assign","prebuilds_url","err","f","whbImport","$tabs","result","desktopRow1Settings","obj","header_type","whbIsObject","whb_data_components","axis","whb_data_frontend_components","$currentTab","parent","$tabUl","end","fadeIn","modalTarget","$modal","controlsHtml","uniqueID","Date","valueOf","editorIcon","toString","newElem","extend","clone","data-unique-id","data-hidden_element","panel","row","splice","$row","mustBeHidden","$save_btn","fieldValue","imageID","$currentElements","textValue","indexOf","replace","after","trim","ui","item","beforeStop","$els_place","new_cell_objs","map","iframeTagStyle","res","sortable","target","files","reader","FileReader","onReaderLoad","readAsText","file","fileName","$headerSwitcher","text","row1","settings","niceSelect","change","language","href","jQuery"],"mappings":"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","file":"whb-editor.js","sourcesContent":["\"use strict\";\r\n\r\nwindow.onload = function () {\r\n\tdocument.body.style.display = \"block\";\r\n};\r\n\r\n(function ($) {\r\n\t$(document).ready(function () {\r\n\t\t$(window).on('load', function () {\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Global Variables\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\t// DOM variables\r\n\t\t\tvar $body = $('body');\r\n\t\t\tvar $wrap = $('#wn-header-builder');\r\n\t\t\tvar $sortablePlaces = $wrap.find('.whb-elements-place');\r\n\t\t\tvar $desktopSortablePlaces = $wrap.find('.whb-desktop-panel').find('.whb-columns[data-columns=\"row1\"]').find('.whb-elements-place');\r\n\t\t\tvar $currentElement;\r\n\t\t\tvar $currentModalEdit;\r\n\r\n\t\t\t// Data variables\r\n\t\t\tvar components = whb_localize.components && !Array.isArray(whb_localize.components) ? whb_localize.components : {};\r\n\t\t\tvar editorComponents = whb_localize.editor_components ? whb_localize.editor_components : {};\r\n\t\t\tvar frontendComponents = whb_localize.frontend_components ? whb_localize.frontend_components : {};\r\n\t\t\tconst platforms = {\r\n\t\t\t\t\"desktop-view\": {},\r\n\t\t\t\t\"tablets-view\": {},\r\n\t\t\t\t\"mobiles-view\": {},\r\n\t\t\t};\r\n\r\n\t\t\t// Position variables\r\n\t\t\tvar currentCell;\r\n\t\t\tvar currentRow;\r\n\t\t\tvar currentPanel;\r\n\r\n\t\t\t// Import button flag\r\n\t\t\tvar importButtonFlag = false;\r\n\r\n\t\t\t// Clipboard element\r\n\t\t\tvar $clipboardElem;\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Helper Functions\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tfunction whbDebug() {\r\n\t\t\t\tconsole.log('%c Components:', 'font-size: 18px; background: #EC9787; color: #fff;', components);\r\n\t\t\t\tconsole.log('%c Editor Components:', 'font-size: 18px; background: #6F9FD8; color: #fff;', editorComponents);\r\n\t\t\t\tconsole.log('%c Frontend Components:', 'font-size: 18px; background: #ECDB54; color: #fff;', frontendComponents);\r\n\t\t\t}\r\n\t\t\twhbDebug();\r\n\r\n\t\t\t// check string is json\r\n\t\t\tfunction whbIsJson(str) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tJSON.parse(str);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tfunction whbIsObject(obj) {\r\n\t\t\t\treturn obj === Object(obj);\r\n\t\t\t}\r\n\r\n\t\t\t// Check for emptiness object\r\n\t\t\tfunction whbIsEmptyObj(obj) {\r\n\t\t\t\tfor (var key in obj) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tfunction whbIsFrontendBuilder() {\r\n\t\t\t\tif ($body.hasClass('whb-frontend-builder-wrap')) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Editor Preview\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tfor (var key in components) {\r\n\t\t\t\tif (components.hasOwnProperty(key)) {\r\n\t\t\t\t\tconst element = components[key];\r\n\t\t\t\t\tif (key.search('logo') != -1) {\r\n\t\t\t\t\t\tvar elemUniqueID = key.slice('5');\r\n\t\t\t\t\t\t$wrap.find('.whb-elements-item[data-element=\"logo\"][data-unique-id=\"' + elemUniqueID + '\"]').each(function () {\r\n\t\t\t\t\t\t\tvar $logo = $(this);\r\n\t\t\t\t\t\t\twp.media.attachment(element.logo).fetch().done(function () {\r\n\t\t\t\t\t\t\t\t$logo.children('a').hide().after('<img class=\"whb-img-placeholder-el\" src=\"' + this.attributes.url + '\" alt=\"\">');\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Frontend Builder Iframe Height\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tvar docHeight = $(document).height();\r\n\t\t\t$('#whbIframe').css('height', docHeight);\r\n\t\t\t$('#whbIframe').contents().find('a').on('click', function () {\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Nice Scroll\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\t// $('.whb-frontend-builder').niceScroll({\r\n\t\t\t// \tcursorborder: \"0\",\r\n\t\t\t// \tbackground: \"#e7e7e7\",\r\n\t\t\t// \tcursorcolor: \"#91989e\",\r\n\t\t\t// });\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Tab\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t * @event\tClick\r\n\t\t\t */\r\n\t\t\t$wrap.find('.whb-tab-panel' + $wrap.find('.whb-tabs-list').find('li.w-active').find('a').attr('href')).show();\r\n\t\t\t$wrap.on('click', '.whb-tabs-list a', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tvar $this = $(this);\r\n\t\t\t\tvar $currentTab = $this.parent();\r\n\t\t\t\tvar $tabs = $this.closest('ul').find('li');\r\n\t\t\t\tvar $tabUl = $this.closest('ul');\r\n\r\n\t\t\t\tif (!$currentTab.hasClass('w-active')) {\r\n\t\t\t\t\t// active current navigation\r\n\t\t\t\t\t$tabs.removeClass('w-active');\r\n\t\t\t\t\t$currentTab.addClass('w-active');\r\n\r\n\t\t\t\t\t// show panel\r\n\t\t\t\t\tif ($tabUl.hasClass('whb-element-groups')) {\r\n\t\t\t\t\t\t$wrap.find('.whb-group-panel').hide().end().find('.whb-group-panel[data-id=\"' + $this.attr('href') + '\"]').show();\r\n\t\t\t\t\t} else if ($tabUl.hasClass('whb-styling-groups')) {\r\n\t\t\t\t\t\t$tabUl.siblings('.whb-styling-group-panel').hide().end().siblings('.whb-styling-group-panel[data-id=\"' + $this.attr('href') + '\"]').show();\r\n\t\t\t\t\t} else if ($tabUl.hasClass('whb-styling-screens')) {\r\n\t\t\t\t\t\t$wrap.find('.whb-styling-screen-panel').hide().end().find('.whb-styling-screen-panel[data-id=\"' + $this.attr('href') + '\"]').show();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$wrap.find('.whb-tab-panel:not(.whb-group-panel)').hide().end().find('.whb-tab-panel' + $this.attr('href')).fadeIn(300);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// Toggle device\r\n\t\t\t$('#whb-desktop-tab, #whb-sticky-tab').on('click', function (e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\t$body.removeClass('whb-tablets-device whb-mobiles-device');\r\n\t\t\t\t$('.whb-screen-view').hide();\r\n\t\t\t\t$('.whb-desktop-view, .whb-sticky-view').show();\r\n\t\t\t});\r\n\r\n\t\t\t$('#whb-tablets-tab').on('click', function (e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\t$body.removeClass('whb-mobiles-device');\r\n\t\t\t\t$body.addClass('whb-tablets-device');\r\n\t\t\t\t$('.whb-screen-view').hide();\r\n\t\t\t\t$('.whb-tablets-view').show();\r\n\t\t\t});\r\n\r\n\t\t\t$('#whb-mobiles-tab').on('click', function (e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\t$body.removeClass('whb-tablets-device');\r\n\t\t\t\t$body.addClass('whb-mobiles-device');\r\n\t\t\t\t$('.whb-screen-view').hide();\r\n\t\t\t\t$('.whb-mobiles-view').show();\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Full Modal\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t * @event\tClick\r\n\t\t\t */\r\n\t\t\t// Show full modal\r\n\t\t\t$wrap.find('.whb-full-modal-btn').on('click', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tvar $this = $(this);\r\n\t\t\t\tvar modalTarget = $this.data('modal-target');\r\n\t\t\t\tvar $modal = $wrap.find('.whb-full-modal[data-modal=\"' + modalTarget + '\"]');\r\n\r\n\t\t\t\t$body.css('overflow', 'hidden');\r\n\t\t\t\t$modal.find('textarea').val(' ');\r\n\t\t\t\t$modal.fadeIn(200);\r\n\t\t\t});\r\n\t\t\t// Hide full modal\r\n\t\t\t$wrap.find('.whb-full-modal-close').on('click', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t$body.css('overflow', 'initial');\r\n\t\t\t\t$wrap.find('.whb-full-modal').hide();\r\n\t\t\t});\r\n\r\n\t\t\t$wrap.find('.whb-full-modal').on('click', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t$body.css('overflow', 'initial');\r\n\t\t\t\t$wrap.find('.whb-full-modal').hide();\r\n\t\t\t});\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Add Element Button\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t * @event\tClick\r\n\t\t\t */\r\n\t\t\t// Show add element modal\r\n\t\t\t$wrap.on('click', '.w-add-element', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tvar $this = $(this);\r\n\r\n\t\t\t\t$wrap.find('.whb-elements').show();\r\n\t\t\t\tcurrentPanel = $this.closest('.whb-tab-panel').attr('id'); // desktop-view, tablets-view, mobiles-view, sticky-view\r\n\t\t\t\tcurrentRow = $this.closest('.whb-columns').attr('data-columns'); // topbar, row1, row2, row3\r\n\t\t\t\tcurrentCell = $this.attr('data-align-col'); // left, center, right\r\n\t\t\t});\r\n\t\t\t// Hide add element modal\r\n\t\t\t$wrap.on('click', '.whb-modal-header i, .whb_close', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t$wrap.find('.whb-modal-wrap').hide();\r\n\t\t\t\t$wrap.find('.whb-modal-wrap[data-element-target]').remove();\r\n\t\t\t});\r\n\t\t\t// Append new element to editor\r\n\t\t\t$wrap.find('.whb-modal-wrap').on('click', '.whb-elements-item a', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tvar $this = $(this);\r\n\t\t\t\tvar uniqueID = new Date().valueOf();\r\n\t\t\t\tvar editorIcon = $(this).find('i').attr('class');\r\n\t\t\t\tvar controlsHtml = `<span class=\"whb-controls\">\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"whb-tooltip tooltip-on-top\" data-tooltip=\"Copy to Clipboard\">\r\n\t\t\t\t\t\t\t\t\t\t\t<i class=\"whb-control whb-copy-btn ti-files\"></i>\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"whb-tooltip tooltip-on-top\" data-tooltip=\"Settings\">\r\n\t\t\t\t\t\t\t\t\t\t\t<i class=\"whb-control whb-edit-btn sl-pencil\"></i>\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"whb-tooltip tooltip-on-top\" data-tooltip=\"Hide\">\r\n\t\t\t\t\t\t\t\t\t\t\t<i class=\"whb-control whb-hide-btn ti-eye\"></i>\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"whb-tooltip tooltip-on-top\" data-tooltip=\"Remove\">\r\n\t\t\t\t\t\t\t\t\t\t\t<i class=\"whb-control whb-delete-btn ti-close\"></i>\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t</span>`;\r\n\r\n\t\t\t\tif ($this.closest('.whb-elements-item').hasClass('whb-clipboard-item')) {\r\n\t\t\t\t\tvar $elem = $this.parent();\r\n\t\t\t\t\tvar elemName = $elem.data('element');\r\n\t\t\t\t\tvar elemUniqueID = $elem.data('unique-id').toString();\r\n\t\t\t\t\tvar elemID = elemName + '_' + elemUniqueID;\r\n\t\t\t\t\tvar newElem = elemName + '_' + uniqueID;\r\n\r\n\t\t\t\t\tfor (const key in components) {\r\n\t\t\t\t\t\tif (components.hasOwnProperty(key)) {\r\n\t\t\t\t\t\t\tconst element = $.extend(true, {}, components[key]);\r\n\t\t\t\t\t\t\tif (elemID == key) {\r\n\t\t\t\t\t\t\t\tcomponents[newElem] = element;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$currentElement = $clipboardElem.clone().removeClass('w-col-sm-4').attr({\r\n\t\t\t\t\t\t'data-unique-id': uniqueID\r\n\t\t\t\t\t}).prepend(controlsHtml);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$currentElement = $this.parent().clone().removeClass('w-col-sm-4').attr({\r\n\t\t\t\t\t\t'data-unique-id': uniqueID,\r\n\t\t\t\t\t\t'data-hidden_element': false,\r\n\t\t\t\t\t\t'data-editor_icon': editorIcon\r\n\t\t\t\t\t}).prepend(controlsHtml);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$wrap.find('.whb-columns[data-columns=\"' + currentRow + '\"]').find('.whb-col.col-' + currentCell).find('.whb-elements-place').append($currentElement);\r\n\t\t\t\t$wrap.find('.whb-modal-wrap').hide();\r\n\t\t\t\twhbElementSettings($currentElement, currentPanel, true);\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Copy Button\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t * @event\tClick\r\n\t\t\t */\r\n\t\t\t$wrap.on('click', '.whb-copy-btn', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tvar $elem = $(this).closest('.whb-elements-item').clone();\r\n\r\n\t\t\t\t$clipboardElem = $elem.clone();\r\n\r\n\t\t\t\t// Remove all clipboard item\r\n\t\t\t\t$('.whb-clipboard-item').remove();\r\n\r\n\t\t\t\t// Create new clipboard item\r\n\t\t\t\t$elem.removeClass('ui-sortable-handle').addClass('w-col-sm-4 whb-clipboard-item');\r\n\t\t\t\t$elem.children('.whb-controls').remove().end().children('img').remove();\r\n\t\t\t\t$elem.children('a').css({\r\n\t\t\t\t\t'display': 'block',\r\n\t\t\t\t\t'background-color': '#e3e3e3'\r\n\t\t\t\t});\r\n\t\t\t\t$elem.find('i').removeClass('ti-control-record').addClass('ti-clipboard').css('color', '#f60');\r\n\t\t\t\t$elem.find('.whb-element-name').text('Paste (Clipboard)');\r\n\r\n\t\t\t\t// Append clipboard item to elements box\r\n\t\t\t\t$('.whb-modal-wrap.whb-elements').find('.whb-modal-contents').prepend($elem);\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Delete Button\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t * @event\tClick\r\n\t\t\t */\r\n\t\t\t$wrap.on('click', '.whb-delete-btn', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tif (confirm('Press OK to delete element, Cancel to leave')) {\r\n\t\t\t\t\tvar $elem = $(this).closest('.whb-elements-item');\r\n\t\t\t\t\tvar elemName = $elem.data('element');\r\n\t\t\t\t\tvar elemUniqueID = $elem.data('unique-id').toString();\r\n\t\t\t\t\tvar elemID = elemName + '_' + elemUniqueID;\r\n\r\n\t\t\t\t\tcurrentPanel = $elem.closest('.whb-tab-panel').attr('id'); // desktop-view, tablets-view, mobiles-view, sticky-view\r\n\t\t\t\t\tcurrentRow = $elem.closest('.whb-columns').attr('data-columns'); // topbar, row1, row2, row3\r\n\t\t\t\t\tcurrentCell = $elem.closest('.whb-col').attr('data-align-col'); // left, center, right\r\n\r\n\t\t\t\t\t// delete from components\r\n\t\t\t\t\tdelete components[elemID];\r\n\r\n\t\t\t\t\t// delete from editor components\r\n\t\t\t\t\tif (currentPanel == 'sticky-view') {\r\n\t\t\t\t\t\tvar cell = editorComponents[currentPanel][currentRow][currentCell];\r\n\r\n\t\t\t\t\t\tfor (var i = 0; i < cell.length; i++) {\r\n\t\t\t\t\t\t\tif (cell[i].uniqueId == elemUniqueID) {\r\n\t\t\t\t\t\t\t\tcell.splice(i, 1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tfor (var platform_key in platforms) {\r\n\t\t\t\t\t\t\tvar findInCell = false;\r\n\t\t\t\t\t\t\tvar panel = editorComponents[platform_key];\r\n\r\n\t\t\t\t\t\t\t(function () {\r\n\t\t\t\t\t\t\t\tfor (var rowKey in panel) {\r\n\t\t\t\t\t\t\t\t\tvar row = panel[rowKey];\r\n\r\n\t\t\t\t\t\t\t\t\tfor (var cell_key in row) {\r\n\t\t\t\t\t\t\t\t\t\tvar cell = row[cell_key];\r\n\r\n\t\t\t\t\t\t\t\t\t\tfor (var i = 0; i < cell.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (cell[i].uniqueId == elemUniqueID) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tcell.splice(i, 1);\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn; // return to anonymous function\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\twhbCreateFrontendComponents();\r\n\t\t\t\t\twhbSaveAllData();\r\n\t\t\t\t\twhbDebug();\r\n\r\n\t\t\t\t\t$wrap.find('.whb-elements-item[data-element=\"' + elemName + '\"][data-unique-id=\"' + elemUniqueID + '\"]').remove();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Edit Button\r\n\t\t\t *\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t * @event\tClick\r\n\t\t\t */\r\n\t\t\t$wrap.on('click', '.whb-edit-btn', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tvar $this = $(this);\r\n\r\n\t\t\t\t$wrap.find('.whb-modal-wrap').hide();\r\n\t\t\t\t$wrap.find('.whb-modal-wrap[data-element-target]').remove();\r\n\t\t\t\t$currentElement = $this.closest('.whb-elements-item');\r\n\t\t\t\tcurrentPanel = $this.closest('.whb-tab-panel').attr('id');\r\n\t\t\t\twhbElementSettings($currentElement, currentPanel);\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Hidden Button\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t * @event\tClick\r\n\t\t\t */\r\n\t\t\t// row\r\n\t\t\t$wrap\r\n\t\t\t\t.find('.whb-tabs-panels').find('.whb-columns')\r\n\t\t\t\t.children('.whb-elements-item[data-hidden_element=\"true\"]')\r\n\t\t\t\t.find('i.whb-hide-btn').removeClass('ti-eye').addClass('wn-far wn-fa-eye-slash')\r\n\t\t\t\t.closest('.whb-columns').addClass('whb-columns-hidden').css('opacity', '0.45');\r\n\r\n\t\t\t// elements\r\n\t\t\t$wrap\r\n\t\t\t\t.find('.whb-elements-place').find('.whb-elements-item[data-hidden_element=\"true\"]')\r\n\t\t\t\t.find('i.whb-hide-btn').removeClass('ti-eye').addClass('wn-far wn-fa-eye-slash');\r\n\r\n\t\t\t$wrap.on('click', '.whb-hide-btn', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t// Get variables\r\n\t\t\t\tvar $this = $(this);\r\n\t\t\t\tvar $elem = $this.closest('.whb-elements-item');\r\n\t\t\t\tvar elemName = $elem.data('element');\r\n\t\t\t\tvar elemUniqueID = $elem.data('unique-id').toString();\r\n\t\t\t\tvar elemID = elemName + '_' + elemUniqueID;\r\n\t\t\t\tvar hidden_element;\r\n\t\t\t\tvar mustBeHidden;\r\n\r\n\t\t\t\t// Position of the Current Element\r\n\t\t\t\tcurrentPanel = $elem.closest('.whb-tab-panel').attr('id'); // desktop-view, tablets-view, mobiles-view, sticky-view\r\n\t\t\t\tcurrentRow = $elem.closest('.whb-columns').attr('data-columns'); // topbar, row1, row2, row3\r\n\t\t\t\tcurrentCell = $elem.closest('.whb-col').attr('data-align-col'); // left, center, right\r\n\r\n\t\t\t\tif (elemName == 'header-area' || elemName == 'sticky-area') {\r\n\t\t\t\t\t// Toggle hidden_element value : ( true | false )\r\n\t\t\t\t\tvar hidden_element = editorComponents[currentPanel][currentRow]['settings']['hidden_element'];\r\n\t\t\t\t\teditorComponents[currentPanel][currentRow]['settings']['hidden_element'] = !hidden_element;\r\n\t\t\t\t\tmustBeHidden = !hidden_element;\r\n\t\t\t\t\t$elem.attr('data-hidden_element', !hidden_element).data('hidden_element', !hidden_element);\r\n\r\n\t\t\t\t\t// Change row opacity and eye icon\r\n\t\t\t\t\tvar $row = $elem.closest('.whb-columns');\r\n\t\t\t\t\tif (mustBeHidden) {\r\n\t\t\t\t\t\t$this.removeClass('ti-eye').addClass('wn-far wn-fa-eye-slash');\r\n\t\t\t\t\t\t$row.addClass('whb-columns-hidden').css('opacity', '0.45');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$this.removeClass('wn-far wn-fa-eye-slash').addClass('ti-eye');\r\n\t\t\t\t\t\t$row.removeClass('whb-columns-hidden').css('opacity', '1');\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Toggle hidden_element value : ( true | false )\r\n\t\t\t\t\tconst cell = editorComponents[currentPanel][currentRow][currentCell];\r\n\t\t\t\t\tfor (var i = 0; i < cell.length; i++) {\r\n\t\t\t\t\t\tvar element = cell[i];\r\n\t\t\t\t\t\tif (element.uniqueId == elemUniqueID) {\r\n\r\n\t\t\t\t\t\t\telement.hidden_element = !element.hidden_element;\r\n\t\t\t\t\t\t\tmustBeHidden = element.hidden_element;\r\n\t\t\t\t\t\t\t$elem.attr('data-hidden_element', element.hidden_element).data('hidden_element', element.hidden_element);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Change row opacity and eye icon\r\n\t\t\t\t\tif (mustBeHidden) {\r\n\t\t\t\t\t\t$this.removeClass('ti-eye').addClass('wn-far wn-fa-eye-slash');\r\n\t\t\t\t\t\t$elem.find('a').css('color', '#888');\r\n\t\t\t\t\t\t$elem.addClass('whb-columns-hidden').css('opacity', '0.45');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$this.removeClass('wn-far wn-fa-eye-slash').addClass('ti-eye');\r\n\t\t\t\t\t\t$elem.find('a').css('color', '#0073aa');\r\n\t\t\t\t\t\t$elem.removeClass('whb-columns-hidden').css('opacity', '1');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\twhbCreateFrontendComponents();\r\n\t\t\t\twhbSaveAllData();\r\n\t\t\t\twhbDebug();\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Save Button\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t * @event\tClick\r\n\t\t\t */\r\n\t\t\t$wrap.on('click', '.whb_save', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tvar $save_btn = $(this);\r\n\t\t\t\tvar elemName = $currentElement.data('element');\r\n\t\t\t\tvar elemUniqueID = $currentElement.data('unique-id');\r\n\t\t\t\tvar elemID = elemName + '_' + elemUniqueID;\r\n\r\n\t\t\t\t// Set field value\r\n\t\t\t\t$currentModalEdit.find('.whb-field').each(function () {\r\n\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\tvar $fieldInput = $this.find('.whb-field-input');\r\n\t\t\t\t\tvar fieldName = $fieldInput.data('field-name');\r\n\t\t\t\t\tvar fieldValue = $fieldInput.val();\r\n\r\n\t\t\t\t\tif (fieldValue == '') {\r\n\t\t\t\t\t\tif (components[elemID].hasOwnProperty(fieldName)) {\r\n\t\t\t\t\t\t\tcomponents[elemID][fieldName] = fieldValue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (fieldValue != undefined) {\r\n\t\t\t\t\t\t\tif (typeof fieldValue == 'string' && fieldValue.indexOf('\"') != -1) {\r\n\t\t\t\t\t\t\t\tfieldValue = fieldValue.replace(/\"/g, \"'\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tcomponents[elemID][fieldName] = fieldValue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\twhbCreateFrontendComponents();\r\n\t\t\t\twhbSaveAllData();\r\n\t\t\t\twhbDebug();\r\n\r\n\t\t\t\t// Copy element in all platforms\r\n\t\t\t\tvar currentElemHtml = $currentElement[0].outerHTML;\r\n\t\t\t\tvar $currentElements = $wrap.find('.whb-elements-item[data-element=\"' + elemName + '\"][data-unique-id=\"' + elemUniqueID + '\"]');\r\n\t\t\t\t$currentElements.each(function () {\r\n\t\t\t\t\t$(this).replaceWith(currentElemHtml);\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Create preview for text and image field in editor\r\n\t\t\t\t$currentElements = $wrap.find('.whb-elements-item[data-element=\"' + elemName + '\"][data-unique-id=\"' + elemUniqueID + '\"]');\r\n\t\t\t\t$currentModalEdit.find('.whb-field.whb-placeholder').each(function () {\r\n\t\t\t\t\tvar $this = $(this);\r\n\r\n\t\t\t\t\tif ($this.hasClass('whb-img-placeholder')) {\r\n\t\t\t\t\t\tvar imageID = $this.find('.whb-field-input').val();\r\n\r\n\t\t\t\t\t\tif (imageID) {\r\n\t\t\t\t\t\t\twp.media.attachment(imageID).fetch().done(function () {\r\n\t\t\t\t\t\t\t\tif (!$currentElements.children('.whb-img-placeholder-el').length > 0) {\r\n\t\t\t\t\t\t\t\t\t$currentElements.attr('data-img-placeholder', imageID).children('a').hide().after('<img class=\"whb-img-placeholder-el\" src=\"' + this.attributes.url + '\" alt=\"\" />');\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t$currentElements.children('.whb-img-placeholder-el').attr('src', this.attributes.url);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$currentElements.removeAttr('data-img-placeholder').children('a').show().end().children('.whb-img-placeholder-el').remove();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ($this.hasClass('whb-text-placeholder')) {\r\n\t\t\t\t\t\tvar textValue = $this.find('.whb-field-input').val();\r\n\r\n\t\t\t\t\t\tif (textValue.trim()) {\r\n\t\t\t\t\t\t\tif (!$currentElements.find('a').find('.whb-text-placeholder-el').length > 0) {\r\n\t\t\t\t\t\t\t\t$currentElements.find('a').find('.whb-element-name').hide().after('<span class=\"whb-text-placeholder-el\">' + textValue + '</span>');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t$currentElements.find('a').find('.whb-text-placeholder-el').html(textValue);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$currentElements.find('a').find('span.whb-element-name').show().end().end().find('.whb-text-placeholder-el').remove();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Hide modal\r\n\t\t\t\tif (!whbIsFrontendBuilder()) {\r\n\t\t\t\t\t$wrap.find('.whb-modal-wrap').hide();\r\n\t\t\t\t\t$wrap.find('.whb-modal-wrap[data-element-target]').remove();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Element Settings Function\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tfunction whbElementSettings($currentElement, currentPanel, new_el = false) {\r\n\t\t\t\tvar elemName = $currentElement.attr('data-element');\r\n\t\t\t\tvar elemUniqueID = $currentElement.attr('data-unique-id');\r\n\t\t\t\tvar elemID = elemName + '_' + elemUniqueID;\r\n\r\n\t\t\t\tif (!components.hasOwnProperty(elemID)) {\r\n\t\t\t\t\tcomponents[elemID] = {};\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Preloader\r\n\t\t\t\tif (!$wrap.children('.whb-spinner-wrap').length > 0) {\r\n\t\t\t\t\t$wrap.prepend('<div class=\"whb-spinner-wrap\"><div class=\"whb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>');\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\turl: whb_localize.ajaxurl,\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\taction: 'whb_get_component_fields',\r\n\t\t\t\t\t\tel_name: elemName,\r\n\t\t\t\t\t\tnonce: whb_localize.nonce\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function (data) {\r\n\t\t\t\t\t\tif ($wrap.children('.whb-spinner-wrap').length > 0) {\r\n\t\t\t\t\t\t\t$wrap.children('.whb-spinner-wrap').remove();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t$('.wn-header-builder-wrap').append(data);\r\n\r\n\t\t\t\t\t\t$currentModalEdit = $wrap.find('.whb-modal-wrap[data-element-target=\"' + elemName + '\"]');\r\n\r\n\t\t\t\t\t\t// Init tab\r\n\t\t\t\t\t\t$currentModalEdit.find('.whb-tabs-list').find('li').removeClass('w-active');\r\n\t\t\t\t\t\t$currentModalEdit.find('.whb-tab-panel').hide();\r\n\t\t\t\t\t\t$currentModalEdit.find('.whb-tabs-list').find('li:first').addClass('w-active');\r\n\t\t\t\t\t\t$currentModalEdit.find('.whb-modal-contents').children('.whb-tab-panel:first').show();\r\n\t\t\t\t\t\t// Styling tab\r\n\t\t\t\t\t\tvar $tabPanels = $currentModalEdit.find('.whb-modal-contents').children('.whb-tab-panel');\r\n\t\t\t\t\t\tif (currentPanel == 'desktop-view') {\r\n\t\t\t\t\t\t\t$tabPanels.find('.whb-tab-panel[data-id=\"#all\"]').show();\r\n\t\t\t\t\t\t} else if (currentPanel == 'tablets-view') {\r\n\t\t\t\t\t\t\t$tabPanels.find('.whb-tab-panel[data-id=\"#tablets\"]').show();\r\n\t\t\t\t\t\t} else if (currentPanel == 'mobiles-view') {\r\n\t\t\t\t\t\t\t$tabPanels.find('.whb-tab-panel[data-id=\"#mobiles\"]').show();\r\n\t\t\t\t\t\t} else if (currentPanel == 'sticky-view') {\r\n\t\t\t\t\t\t\t$tabPanels.find('.whb-tab-panel[data-id=\"#all\"]').show();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// Show first panel\r\n\t\t\t\t\t\t$tabPanels.find('.whb-tab-panel').find('.whb-tab-panel:first').show();\r\n\r\n\t\t\t\t\t\t// Show current modal edit\r\n\t\t\t\t\t\t$currentModalEdit.show();\r\n\r\n\t\t\t\t\t\t// Set fields values\r\n\t\t\t\t\t\t$currentModalEdit.find('.whb-field').each(function () {\r\n\t\t\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t\t\tvar $fieldInput = $this.find('.whb-field-input');\r\n\t\t\t\t\t\t\tvar fieldName = $fieldInput.data('field-name');\r\n\t\t\t\t\t\t\tvar fieldStd = $fieldInput.data('field-std');\r\n\r\n\t\t\t\t\t\t\tfieldStd = (typeof fieldStd != 'undefined') ? fieldStd : '';\r\n\r\n\t\t\t\t\t\t\t// if statement: update field value\r\n\t\t\t\t\t\t\t// else statement: set default data to field\r\n\t\t\t\t\t\t\tif ($fieldInput.hasClass('whb-field-textarea')) {\r\n\t\t\t\t\t\t\t\t$fieldInput.val(components[elemID][fieldName]).val( components[elemID][fieldName]);\r\n\t\t\t\t\t\t\t} else if (typeof components[elemID][fieldName] != 'undefined') {\r\n\t\t\t\t\t\t\t\t$fieldInput.val(components[elemID][fieldName]);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t$fieldInput.val(fieldStd).val(fieldStd);\r\n\t\t\t\t\t\t\t\tif (fieldStd) {\r\n\t\t\t\t\t\t\t\t\tcomponents[elemID][fieldName] = fieldStd;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif (new_el) {\r\n\t\t\t\t\t\t\tvar elemEditorIcon = $currentElement.find('a').find('i').attr('class');\r\n\t\t\t\t\t\t\tif (currentPanel == 'sticky-view') {\r\n\t\t\t\t\t\t\t\teditorComponents[currentPanel][currentRow][currentCell].push({\r\n\t\t\t\t\t\t\t\t\tname: elemName,\r\n\t\t\t\t\t\t\t\t\tuniqueId: elemUniqueID,\r\n\t\t\t\t\t\t\t\t\thidden_element: false,\r\n\t\t\t\t\t\t\t\t\teditor_icon: elemEditorIcon\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tfor (var platform_key in platforms) {\r\n\t\t\t\t\t\t\t\t\teditorComponents[platform_key][currentRow][currentCell].push({\r\n\t\t\t\t\t\t\t\t\t\tname: elemName,\r\n\t\t\t\t\t\t\t\t\t\tuniqueId: elemUniqueID,\r\n\t\t\t\t\t\t\t\t\t\thidden_element: false,\r\n\t\t\t\t\t\t\t\t\t\teditor_icon: elemEditorIcon\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Fields\r\n\t\t\t\t\t\twhbFields();\r\n\r\n\t\t\t\t\t\t// Dependency\r\n\t\t\t\t\t\t$currentModalEdit.find('.whb-dependency').on('change', function () {\r\n\t\t\t\t\t\t\twhbFieldDependency($(this));\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t$currentModalEdit.find('.whb-dependency').trigger('change');\r\n\r\n\t\t\t\t\t\t// Craete|Update element in all platforms (desktop, tablets, mobiles)\r\n\t\t\t\t\t\tif (new_el) {\r\n\t\t\t\t\t\t\tvar currentElemHtml = $currentElement[0].outerHTML;\r\n\t\t\t\t\t\t\t$('.whb-elements-item[data-element=\"' + elemName + '\"][data-unique-id=\"' + elemUniqueID + '\"]').each(function () {\r\n\t\t\t\t\t\t\t\t$(this).replaceWith(currentElemHtml);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\twhbModalDraggable($currentModalEdit[0]);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\twhbDebug();\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Field Dependency Function\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tfunction whbFieldDependency($parent) {\r\n\t\t\t\tvar dependencyData = $parent.data('dependency');\r\n\t\t\t\tvar parentValue = $parent.find('.whb-field-input').val();\r\n\r\n\t\t\t\t$.each(dependencyData, function (val, els) {\r\n\t\t\t\t\tfor (var i = 0; i < els.length; i++) {\r\n\r\n\t\t\t\t\t\tvar $elem = $currentModalEdit.find('.whb-field-input[data-field-name=\"' + els[i] + '\"]').closest('.whb-field').hide();\r\n\t\t\t\t\t\tvar haveDependency = $elem.attr('class') == 'whb-field w-col-sm-12 whb-dependency' ? true : false;\r\n\r\n\t\t\t\t\t\tif (val == parentValue) {\r\n\t\t\t\t\t\t\t$elem.show();\r\n\t\t\t\t\t\t\tif (haveDependency) {\r\n\t\t\t\t\t\t\t\twhbFieldDependency($el);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (haveDependency) {\r\n\t\t\t\t\t\t\t\t$.each($elem.data('dependency'), function (elem_value, elems) {\r\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < elems.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\t$currentModalEdit.find('.whb-field-input[data-field-name=\"' + elems[i] + '\"]').closest('.whb-field').hide();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} // end for\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Fields Function\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tfunction whbFields() {\r\n\t\t\t\tvar $modalWrap = $('.whb-modal-wrap');\r\n\r\n\t\t\t\t// Switcher field\r\n\t\t\t\t$modalWrap.find('.whb-switcher').find('.whb-field-input').on('change', function () {\r\n\t\t\t\t\tvar $this = $(this);\r\n\r\n\t\t\t\t\tif ($this.is(':checked')) {\r\n\t\t\t\t\t\t$this.attr('value', 'true');\r\n\t\t\t\t\t\t$this.attr('checked', 'checked');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$this.attr('value', 'false');\r\n\t\t\t\t\t\t$this.removeAttr('checked');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Attach Image field\r\n\t\t\t\t$modalWrap.find('.whb-attach-image').each(function () {\r\n\t\t\t\t\tvar frame;\r\n\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\tvar $addImgLink = $this.find('.whb-add-image');\r\n\t\t\t\t\tvar $delImgLink = $this.find('.whb-remove-image');\r\n\t\t\t\t\tvar $imgContainer = $this.find('.whb-preview-image');\r\n\r\n\t\t\t\t\t// ADD IMAGE LINK\r\n\t\t\t\t\t$addImgLink.on('click', function (event) {\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\t\tvar $imgIdInput = $this.find('input.whb-attach-image');\r\n\t\t\t\t\t\tvar value = $imgIdInput.val();\r\n\r\n\t\t\t\t\t\tvalue = value ? value : '';\r\n\r\n\t\t\t\t\t\t// If the media frame already exists, reopen it.\r\n\t\t\t\t\t\tif (frame) {\r\n\t\t\t\t\t\t\tframe.open();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Create a new media frame\r\n\t\t\t\t\t\tframe = wp.media({\r\n\t\t\t\t\t\t\tmultiple: false // Set to true to allow multiple files to be selected\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// When an image is selected in the media frame...\r\n\t\t\t\t\t\tframe.on('select', function () {\r\n\t\t\t\t\t\t\t// Get media attachment details from the frame state\r\n\t\t\t\t\t\t\tvar attachment = frame.state().get('selection').first().toJSON();\r\n\r\n\t\t\t\t\t\t\t// Send the attachment URL to our custom image input field.\r\n\t\t\t\t\t\t\t$imgContainer.html('').append('<img src=\"' + attachment.url + '\" alt=\"\">').css('display', 'block');\r\n\r\n\t\t\t\t\t\t\t// Send the attachment id to our hidden input\r\n\t\t\t\t\t\t\t$imgIdInput.val(attachment.id).trigger('input');\r\n\r\n\t\t\t\t\t\t\t// Unhide the remove image link\r\n\t\t\t\t\t\t\t$delImgLink.show();\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// Finally, open the modal on click\r\n\t\t\t\t\t\tframe.open();\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// Delete image link\r\n\t\t\t\t\t$delImgLink.on('click', function (event) {\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\t\tvar $imgIdInput = $this.find('input.whb-attach-image');\r\n\r\n\t\t\t\t\t\t// Clear out the preview image\r\n\t\t\t\t\t\t$imgContainer.html('').hide();\r\n\r\n\t\t\t\t\t\t// Hide the delete image link\r\n\t\t\t\t\t\t$delImgLink.hide();\r\n\r\n\t\t\t\t\t\t// Delete the image id from the hidden input\r\n\t\t\t\t\t\t$imgIdInput.attr('value', '').trigger('input');\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Number Unit field\r\n\t\t\t\t$modalWrap.find('.whb-number-unit').each(function () {\r\n\t\t\t\t\tvar $numberUnit = $(this);\r\n\t\t\t\t\tvar $inputNumber = $numberUnit.find('input[type=\"number\"]');\r\n\t\t\t\t\tvar $option = $numberUnit.find('.whb-opts').children('span');\r\n\t\t\t\t\tvar $fieldInput = $numberUnit.find('.whb-field-input');\r\n\r\n\t\t\t\t\t$option.on('click', function (event) {\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t\tvar unit = $this.data('value');\r\n\t\t\t\t\t\tvar num_val = $inputNumber.val();\r\n\r\n\t\t\t\t\t\t$option.removeClass('whb-active');\r\n\t\t\t\t\t\t$this.addClass('whb-active');\r\n\t\t\t\t\t\tif (num_val) {\r\n\t\t\t\t\t\t\t$fieldInput.attr('value', num_val + unit).trigger('input');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t$inputNumber.on('change', function (event) {\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t\tvar unit = $numberUnit.find('.whb-opts').children('span.whb-active').data('value');\r\n\t\t\t\t\t\tvar num_val = $inputNumber.val();\r\n\r\n\t\t\t\t\t\tif (num_val) {\r\n\t\t\t\t\t\t\t$fieldInput.attr('value', num_val + unit).trigger('input');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$fieldInput.attr('value', '').trigger('input');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Custom Select field\r\n\t\t\t\t$modalWrap.find('.whb-custom-select').find('.whb-opts').find('span').on('click', function () {\r\n\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\tvar $customSelect = $this.closest('.whb-custom-select');\r\n\t\t\t\t\tvar $option = $customSelect.find('.whb-opts').children('span');\r\n\t\t\t\t\tvar $fieldInput = $customSelect.find('.whb-field-input');\r\n\t\t\t\t\tvar value = $this.data('value');\r\n\r\n\t\t\t\t\t$option.removeClass('whb-active');\r\n\t\t\t\t\t$this.addClass('whb-active');\r\n\t\t\t\t\t$fieldInput.val( value ).trigger('input');\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Icons field\r\n\t\t\t\t$modalWrap.find('.whb-field-icons-wrap').each(function () {\r\n\t\t\t\t\tvar $iconsWrap = $(this);\r\n\t\t\t\t\tvar $icon = $iconsWrap.find('.wn-icon').find('label');\r\n\t\t\t\t\tvar $fieldInput = $iconsWrap.find('.whb-field-input');\r\n\r\n\t\t\t\t\t$icon.on('click', function (event) {\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t\tvar $iconClass = $this.attr('for');\r\n\r\n\t\t\t\t\t\t$icon.removeClass('whb-active');\r\n\t\t\t\t\t\t$this.addClass('whb-active');\r\n\t\t\t\t\t\t$fieldInput.attr('value', $iconClass).trigger('input');\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Color picker\r\n\t\t\t\t$modalWrap.find('.whb-color-picker').wpColorPicker();\r\n\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Header Builder - Set Value of Field\r\n\t\t\t\t * @version\t1.0.0\r\n\t\t\t\t */\r\n\t\t\t\t$modalWrap.find('.whb-field').find('.whb-field-input').each(function () {\r\n\t\t\t\t\tvar $fieldInput = $(this);\r\n\r\n\t\t\t\t\t// Switcher\r\n\t\t\t\t\tif ($fieldInput.hasClass('whb-switcher-field')) {\r\n\t\t\t\t\t\tif ($fieldInput.val() == 'true') {\r\n\t\t\t\t\t\t\t$fieldInput.attr('checked', 'checked').trigger('input');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$fieldInput.removeAttr('checked');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Custom Select\r\n\t\t\t\t\tif ($fieldInput.hasClass('whb-field-custom-select')) {\r\n\t\t\t\t\t\t$fieldInput.siblings('.whb-opts').find('span').each(function () {\r\n\t\t\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t\t\t$this.removeClass('whb-active');\r\n\t\t\t\t\t\t\tif ($this.data('value') == $fieldInput.val()) {\r\n\t\t\t\t\t\t\t\t$this.addClass('whb-active');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Number Unit\r\n\t\t\t\t\tif ($fieldInput.hasClass('whb-field-number-unit')) {\r\n\t\t\t\t\t\tvar value = $fieldInput.val();\r\n\r\n\t\t\t\t\t\tif (value) {\r\n\t\t\t\t\t\t\tvar $numberUnit = $fieldInput.closest('.whb-number-unit');\r\n\t\t\t\t\t\t\tvar $inputNumber = $numberUnit.find('input[type=\"number\"]');\r\n\t\t\t\t\t\t\tvar $option = $numberUnit.find('.whb-opts').children('span');\r\n\t\t\t\t\t\t\tvar numberValue = parseFloat(value);\r\n\t\t\t\t\t\t\tvar valueUnit = value.split(numberValue)[1];\r\n\r\n\t\t\t\t\t\t\t$inputNumber.val(numberValue).trigger('input');\r\n\t\t\t\t\t\t\t$option.each(function () {\r\n\t\t\t\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t\t\t\tvar unit = $this.data('value');\r\n\r\n\t\t\t\t\t\t\t\t$this.removeClass('whb-active');\r\n\t\t\t\t\t\t\t\tif (unit == valueUnit) {\r\n\t\t\t\t\t\t\t\t\t$this.addClass('whb-active');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$fieldInput.closest('.whb-number-unit').find('input[type=\"number\"]').val('');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Icon\r\n\t\t\t\t\tif ($fieldInput.hasClass('whb-icon-field')) {\r\n\t\t\t\t\t\tvar value = $fieldInput.val();\r\n\t\t\t\t\t\tvar $iconsWrap = $fieldInput.closest('.whb-field-icons-wrap');\r\n\t\t\t\t\t\tvar $icon = $iconsWrap.find('.wn-icon').find('label');\r\n\r\n\t\t\t\t\t\tif (value) {\r\n\t\t\t\t\t\t\t$icon.removeClass('whb-active');\r\n\t\t\t\t\t\t\t$iconsWrap.find('.wn-icon').find('label[for=\"' + value + '\"]').addClass('whb-active');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$icon.removeClass('whb-active');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Attach Image\r\n\t\t\t\t\tif ($fieldInput.hasClass('whb-attach-image')) {\r\n\t\t\t\t\t\tvar val = $fieldInput.val();\r\n\t\t\t\t\t\tvar $delImgLink = $fieldInput.siblings('.whb-remove-image');\r\n\t\t\t\t\t\tvar $imgContainer = $fieldInput.siblings('.whb-preview-image');\r\n\r\n\t\t\t\t\t\tif (val && !wp.media.attachment(val).destroyed) {\r\n\t\t\t\t\t\t\tif (!$currentModalEdit.find('.whb-modal-contents').find('.whb-spinner-wrap').length > 0) {\r\n\t\t\t\t\t\t\t\t$currentModalEdit.find('.whb-modal-contents').prepend('<div class=\"whb-spinner-wrap\"><div class=\"whb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>');\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\twp.media.attachment(val).fetch().always(function () {\r\n\t\t\t\t\t\t\t\tif ($currentModalEdit.find('.whb-modal-contents').find('.whb-spinner-wrap').length > 0) {\r\n\t\t\t\t\t\t\t\t\t$currentModalEdit.find('.whb-modal-contents').find('.whb-spinner-wrap').remove();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t$imgContainer.html('')\r\n\t\t\t\t\t\t\t\tif (this.attributes.url != undefined) {\r\n\t\t\t\t\t\t\t\t\t// Send the attachment URL to our custom image input field.\r\n\t\t\t\t\t\t\t\t\t$imgContainer.append('<img src=\"' + this.attributes.url + '\" alt=\"\">').css('display', 'block');\r\n\t\t\t\t\t\t\t\t\t// Unhide the remove image link\r\n\t\t\t\t\t\t\t\t\t$delImgLink.show();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// Clear out the preview image\r\n\t\t\t\t\t\t\t$imgContainer.html('').hide();\r\n\t\t\t\t\t\t\t// Hide the delete image link\r\n\t\t\t\t\t\t\t$delImgLink.hide();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Drag and Drop Functions\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\t// Editor draggable\r\n\t\t\tfunction whbEditorDraggable() {\r\n\t\t\t\t$sortablePlaces.sortable({\r\n\t\t\t\t\tconnectWith: '.whb-elements-place',\r\n\t\t\t\t\tplaceholder: 'ui-sortable-placeholder',\r\n\t\t\t\t\tforcePlaceholderSize: true,\r\n\t\t\t\t\ttolerance: 'pointer',\r\n\t\t\t\t\tstart: function (event, ui) {\r\n\t\t\t\t\t\tvar $elem = $(ui.item);\r\n\r\n\t\t\t\t\t\tcurrentPanel = $elem.closest('.whb-tab-panel').attr('id'); // desktop-view, tablets-view, mobiles-view, sticky-view\r\n\t\t\t\t\t\tcurrentRow = $elem.closest('.whb-columns').attr('data-columns'); // topbar, row1, row2, row3\r\n\t\t\t\t\t\tcurrentCell = $elem.closest('.whb-col').attr('data-align-col'); // left, center, right\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbeforeStop: function (event, ui) {\r\n\t\t\t\t\t\tvar $elem = $(ui.item);\r\n\t\t\t\t\t\tvar $els_place = $elem.closest('.whb-elements-place');\r\n\t\t\t\t\t\tvar elemName = $elem.data('element');\r\n\t\t\t\t\t\tvar elemUniqueID = $elem.data('unique-id').toString();\r\n\t\t\t\t\t\tvar elemID = elemName + '_' + elemUniqueID;\r\n\t\t\t\t\t\tvar elemFromCell;\r\n\r\n\t\t\t\t\t\t// Remove element from start cell\r\n\t\t\t\t\t\tvar start_cell_obj = editorComponents[currentPanel][currentRow][currentCell];\r\n\t\t\t\t\t\tfor (var i = 0; i < start_cell_obj.length; i++) {\r\n\t\t\t\t\t\t\tif (start_cell_obj[i].uniqueId == elemUniqueID) {\r\n\t\t\t\t\t\t\t\telemFromCell = start_cell_obj.splice(i, 1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Add element to received cell\r\n\t\t\t\t\t\tcurrentRow = $elem.closest('.whb-columns').attr('data-columns'); // topbar, row1, row2, row3\r\n\t\t\t\t\t\tcurrentCell = $elem.closest('.whb-col').attr('data-align-col'); // left, center, right\r\n\t\t\t\t\t\tvar new_cell_objs = $els_place.children('.whb-elements-item').map(function (i, el) {\r\n\t\t\t\t\t\t\t$elem = $(el);\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\tname: $elem.data('element'),\r\n\t\t\t\t\t\t\t\tuniqueId: $elem.data('unique-id').toString(),\r\n\t\t\t\t\t\t\t\thidden_element: JSON.parse($elem.data('hidden_element')),\r\n\t\t\t\t\t\t\t\teditor_icon: $elem.data('editor_icon'),\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}).get();\r\n\r\n\t\t\t\t\t\t// Update editor components\r\n\t\t\t\t\t\teditorComponents[currentPanel][currentRow][currentCell] = new_cell_objs;\r\n\r\n\t\t\t\t\t\twhbCreateFrontendComponents();\r\n\t\t\t\t\t\twhbSaveAllData();\r\n\t\t\t\t\t\twhbDebug();\r\n\t\t\t\t\t}\r\n\t\t\t\t}).disableSelection();\r\n\t\t\t}\r\n\t\t\twhbEditorDraggable();\r\n\r\n\t\t\t// Modal draggable\r\n\t\t\tfunction whbModalDraggable(element) {\r\n\t\t\t\tvar pos1 = 0,\r\n\t\t\t\t\tpos2 = 0,\r\n\t\t\t\t\tpos3 = 0,\r\n\t\t\t\t\tpos4 = 0;\r\n\r\n\t\t\t\tif (element.getElementsByClassName('whb-modal-header')) {\r\n\t\t\t\t\telement.getElementsByClassName('whb-modal-header')[0].onmousedown = whb_drag_mouse_down;\r\n\t\t\t\t} else {\r\n\t\t\t\t\telement.onmousedown = whb_drag_mouse_down;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction whb_drag_mouse_down(e) {\r\n\t\t\t\t\te = e || window.event;\r\n\t\t\t\t\tpos3 = e.clientX;\r\n\t\t\t\t\tpos4 = e.clientY;\r\n\t\t\t\t\tdocument.onmouseup = whbCloseModalDraggable;\r\n\t\t\t\t\tdocument.onmousemove = whbElementDrag;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction whbElementDrag(e) {\r\n\t\t\t\t\te = e || window.event;\r\n\t\t\t\t\tpos1 = pos3 - e.clientX;\r\n\t\t\t\t\tpos2 = pos4 - e.clientY;\r\n\t\t\t\t\tpos3 = e.clientX;\r\n\t\t\t\t\tpos4 = e.clientY;\r\n\t\t\t\t\telement.style.top = (element.offsetTop - pos2) + \"px\";\r\n\t\t\t\t\telement.style.left = (element.offsetLeft - pos1) + \"px\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction whbCloseModalDraggable() {\r\n\t\t\t\t\tdocument.onmouseup = null;\r\n\t\t\t\t\tdocument.onmousemove = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\twhbModalDraggable($('.whb-modal-wrap')[0]);\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Publish Button\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\t$('.redux-action_bar input[name=\"redux_save\"], #whb-publish').on('click', function (e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\t// Editor Preloader\r\n\t\t\t\tif ($wrap.children('.whb-spinner-wrap').length == 0) {\r\n\t\t\t\t\t$wrap.prepend('<div class=\"whb-spinner-wrap\"><div class=\"whb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>');\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Frontend Preloader\r\n\t\t\t\tvar $WHBFrontend = $('#whbIframe').contents().find('#webnus-header-builder');\r\n\t\t\t\t// var $WHBFrontend = $('#webnus-header-builder');\r\n\t\t\t\tif ($WHBFrontend.children('.whb-spinner-wrap').length == 0) {\r\n\t\t\t\t\t$WHBFrontend.prepend('<div class=\"whb-spinner-wrap\"><div class=\"whb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>');\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\turl: whb_localize.ajaxurl,\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\taction: 'whb_publish',\r\n\t\t\t\t\t\tnonce: whb_localize.nonce,\r\n\t\t\t\t\t\tcomponents: JSON.stringify(components),\r\n\t\t\t\t\t\teditorComponents: JSON.stringify(editorComponents),\r\n\t\t\t\t\t\tfrontendComponents: JSON.stringify(frontendComponents),\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function (res) {\r\n\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t// Remove prelaoder\r\n\t\t\t\t\t\t$wrap.children('.whb-spinner-wrap').remove();\r\n\t\t\t\t\t\t$WHBFrontend.children('.whb-spinner-wrap').remove();\r\n\t\t\t\t\t\tif (importButtonFlag) {\r\n\t\t\t\t\t\t\tlocation.reload();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Collapse Button\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\t$('.whb-action-collapse').on('click', function () {\r\n\t\t\t\tvar $elem = $(this);\r\n\t\t\t\tvar $editor = $('.wn-header-builder-wrap.whb-frontend-builder').css('bottom', '-60%');\r\n\t\t\t\tvar $actions = $('.whb-actions').css('bottom', '0');\r\n\r\n\t\t\t\t// if: close\r\n\t\t\t\t// else: open\r\n\t\t\t\tif ($elem.hasClass('whb-open')) {\r\n\t\t\t\t\t$editor.css('bottom', '-60%');\r\n\t\t\t\t\t$actions.css('bottom', '0');\r\n\t\t\t\t\t$elem.removeClass('whb-open')\r\n\t\t\t\t\t$elem.children('i').attr('class', 'ti-arrow-circle-up');\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$editor.css('bottom', '0');\r\n\t\t\t\t\t$actions.css('bottom', '60%');\r\n\t\t\t\t\t$elem.addClass('whb-open')\r\n\t\t\t\t\t$elem.children('i').attr('class', 'ti-arrow-circle-down');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Get Script\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tfunction whbInjectScriptToIframe(src) {\r\n\t\t\t\tvar iframeHead = window.frames[\"whbIframe\"].document.getElementsByTagName(\"head\")[0];\r\n\t\t\t\tvar myScript = document.createElement('script');\r\n\t\t\t\tmyScript.src = src;\r\n\t\t\t\tiframeHead.appendChild(myScript);\r\n\t\t\t}\r\n\r\n\t\t\tfunction whbInjectStyleToIframe(styles) {\r\n\t\t\t\tvar iframeTagStyle = window.frames[\"whbIframe\"].document;\r\n\t\t\t\tiframeTagStyle.getElementById('whb-enqueue-dynamic-style').children[0].innerHTML = styles;\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Save All Data Function\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tfunction whbSaveAllData() {\r\n\t\t\t\tvar $WHBFrontend = $('#whbIframe').contents().find('#webnus-header-builder');\r\n\r\n\t\t\t\t// Frontend Preloader\r\n\t\t\t\tif ($WHBFrontend.children('.whb-spinner-wrap').length == 0) {\r\n\t\t\t\t\t$WHBFrontend.prepend('<div class=\"whb-spinner-wrap\"><div class=\"whb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (whbIsFrontendBuilder()) {\r\n\t\t\t\t\t$('.whb_save').css({\r\n\t\t\t\t\t\t'background-color': '#ecf9fd',\r\n\t\t\t\t\t\t'border-color': '#07bbe9',\r\n\t\t\t\t\t\t'color': '#07bbe9'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\turl: whb_localize.ajaxurl,\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\taction: 'whb_save_data',\r\n\t\t\t\t\t\tnonce: whb_localize.nonce,\r\n\t\t\t\t\t\tfrontendComponents: JSON.stringify(frontendComponents),\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function (data) {\r\n\t\t\t\t\t\tif (whbIsFrontendBuilder()) {\r\n\t\t\t\t\t\t\t$('.whb_save').css({\r\n\t\t\t\t\t\t\t\t'background-color': '#ecf9fd',\r\n\t\t\t\t\t\t\t\t'border-color': '#07bbe9',\r\n\t\t\t\t\t\t\t\t'color': '#07bbe9'\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\tvar $newWHBFrontend = $(data);\r\n\r\n\t\t\t\t\t\t\t// Frontend Preloader\r\n\t\t\t\t\t\t\tif ($newWHBFrontend.children('.whb-spinner-wrap').length == 0) {\r\n\t\t\t\t\t\t\t\t$newWHBFrontend.prepend('<div class=\"whb-spinner-wrap\"><div class=\"whb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>');\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t$WHBFrontend[0].outerHTML = $newWHBFrontend[0].outerHTML;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (importButtonFlag) {\r\n\t\t\t\t\t\t\t$('.redux-action_bar input[name=\"redux_save\"], #whb-publish').trigger('click');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (whbIsFrontendBuilder()) {\r\n\t\t\t\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\t\t\t\turl: whb_localize.ajaxurl,\r\n\t\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\t\taction: 'whb_live_dynamic_styles',\r\n\t\t\t\t\t\t\t\t\t\tnonce: whb_localize.nonce,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tsuccess: function (data) {\r\n\t\t\t\t\t\t\t\t\t\twhbInjectStyleToIframe(data);\r\n\t\t\t\t\t\t\t\t\t\t$('#whbIframe').contents().find('#webnus-header-builder').children('.whb-spinner-wrap').remove();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (whbIsFrontendBuilder()) {\r\n\t\t\t\t\t\t\tvar path = whb_localize.assets_url + 'src/frontend/';\r\n\t\t\t\t\t\t\tvar scripts = [\r\n\t\t\t\t\t\t\t\t'whb-jquery-plugins.js',\r\n\t\t\t\t\t\t\t\t'whb-frontend.js',\r\n\t\t\t\t\t\t\t];\r\n\t\t\t\t\t\t\twhbInjectScriptToIframe(path + scripts[0]);\r\n\t\t\t\t\t\t\twhbInjectScriptToIframe(path + scripts[1]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Create Frontend Components Function\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tfunction whbCreateFrontendComponents() {\r\n\t\t\t\tfrontendComponents = $.extend(true, {}, editorComponents);\r\n\t\t\t\tfor (var screen_key in frontendComponents) {\r\n\t\t\t\t\tfor (var rowKey in frontendComponents[screen_key]) {\r\n\t\t\t\t\t\tfor (var cell_key in frontendComponents[screen_key][rowKey]) {\r\n\t\t\t\t\t\t\tvar cell = frontendComponents[screen_key][rowKey][cell_key];\r\n\r\n\t\t\t\t\t\t\tif (cell_key == 'settings') {\r\n\t\t\t\t\t\t\t\tvar elemName = cell.element;\r\n\t\t\t\t\t\t\t\tvar elemID = cell.uniqueId;\r\n\t\t\t\t\t\t\t\tvar component_key = elemName + '_' + elemID;\r\n\r\n\t\t\t\t\t\t\t\tif (component_key in components) {\r\n\t\t\t\t\t\t\t\t\tObject.assign(cell, components[component_key]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tfor (const key in cell) {\r\n\t\t\t\t\t\t\t\t\tif (cell.hasOwnProperty(key)) {\r\n\t\t\t\t\t\t\t\t\t\tconst value = cell[key];\r\n\t\t\t\t\t\t\t\t\t\tif (key != 'hidden_element' && typeof value === 'boolean') {\r\n\t\t\t\t\t\t\t\t\t\t\tcell[key] = String(value);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (cell.length != 0) {\r\n\t\t\t\t\t\t\t\t\tfor (var el of cell) {\r\n\t\t\t\t\t\t\t\t\t\tvar elemName = el.name;\r\n\t\t\t\t\t\t\t\t\t\tvar elemID = el.uniqueId;\r\n\t\t\t\t\t\t\t\t\t\tvar component_key = elemName + '_' + elemID;\r\n\r\n\t\t\t\t\t\t\t\t\t\tif (component_key in components) {\r\n\t\t\t\t\t\t\t\t\t\t\tObject.assign(el, components[component_key]);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tfor (const key in el) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (el.hasOwnProperty(key)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst value = el[key];\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (key != 'hidden_element' && typeof value === 'boolean') {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tel[key] = String(value);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Import Button\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\t// import button\r\n\t\t\t$(\"#whb-import\").change(function (e) {\r\n\t\t\t\tvar file = event.target.files[0];\r\n\t\t\t\tvar reader = new FileReader();\r\n\t\t\t\treader.onload = onReaderLoad;\r\n\t\t\t\treader.readAsText(file);\r\n\t\t\t});\r\n\r\n\t\t\tfunction onReaderLoad(event) {\r\n\t\t\t\twhbImport(event.target.result);\r\n\t\t\t}\r\n\t\t\t// Import function\r\n\t\t\tfunction whbImport(content) {\r\n\t\t\t\tif (content && (whbIsJson(content) || whbIsObject(content))) {\r\n\t\t\t\t\t$body.css({\r\n\t\t\t\t\t\t'height': '1px',\r\n\t\t\t\t\t\t'overflow': 'hidden'\r\n\t\t\t\t\t}).prepend('<div class=\"whb-spinner-wrap\"><div class=\"whb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>');\r\n\t\t\t\t\t$('#wpwrap').css('display', 'none');\r\n\t\t\t\t\tcontent = whbIsJson(content) ? JSON.parse(content) : content;\r\n\t\t\t\t\tcomponents = content.whb_data_components;\r\n\t\t\t\t\teditorComponents = content.whb_data_editor_components;\r\n\t\t\t\t\tfrontendComponents = content.whb_data_frontend_components;\r\n\t\t\t\t\timportButtonFlag = true;\r\n\t\t\t\t\twhbSaveAllData();\r\n\t\t\t\t} else {\r\n\t\t\t\t\talert('Header import input is empty! That\\'s why no data can import.');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Prebuild Button\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\t$wrap.find('.whb-prebuild-item').on('click', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tif (confirm('Your selected header pre-defined will apply on current elements and settings. Are you sure you want to overwrite?')) {\r\n\t\t\t\t\tvar fileName = $(this).data('file-name');\r\n\t\t\t\t\tvar $modal = $('.whb-full-modal');\r\n\t\t\t\t\tvar url = whb_localize.prebuilds_url + fileName;\r\n\r\n\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\tdataType: \"json\",\r\n\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\turl: url,\r\n\t\t\t\t\t\tsuccess: function (data) {\r\n\t\t\t\t\t\t\tvar content = data;\r\n\t\t\t\t\t\t\twhbImport(content);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Header Type Switcher Button (Vertical|Horizontal)\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tif (editorComponents['desktop-view']['row1']['settings']['header_type'] == 'vertical') {\r\n\t\t\t\tvar $panels = $wrap.find('.whb-tabs-panels');\r\n\t\t\t\tvar $settings = $panels.find('#desktop-view').children('.whb-columns[data-columns=\"row1\"]').children('.whb-elements-item');\r\n\t\t\t\tvar $headerSwitcher = $('#whb-vertical-header');\r\n\r\n\t\t\t\t$settings.attr('data-element', 'vertical-area');\r\n\t\t\t\t$headerSwitcher.find('span').text('Horizontal Header');\r\n\t\t\t\t$panels.addClass('whb-vertical-header-panel');\r\n\t\t\t\t$desktopSortablePlaces.sortable({\r\n\t\t\t\t\taxis: 'y'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t$wrap.on('click', '#whb-vertical-header', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tvar $this = $(this);\r\n\t\t\t\tvar $tabs = $('.whb-tabs-list');\r\n\t\t\t\tvar $panels = $wrap.find('.whb-tabs-panels');\r\n\t\t\t\tvar $settings = $panels.find('#desktop-view').children('.whb-columns[data-columns=\"row1\"]').children('.whb-elements-item');\r\n\t\t\t\tvar desktopRow1Settings = editorComponents['desktop-view'].row1.settings;\r\n\t\t\t\tvar header_type = desktopRow1Settings.header_type;\r\n\r\n\t\t\t\tif (header_type == 'horizontal') {\r\n\t\t\t\t\tdesktopRow1Settings.element = 'vertical-area';\r\n\t\t\t\t\t$settings.attr('data-element', 'vertical-area');\r\n\t\t\t\t\tdesktopRow1Settings.header_type = 'vertical';\r\n\t\t\t\t\t$this.find('span').text('Horizontal Header');\r\n\t\t\t\t\t$panels.addClass('whb-vertical-header-panel');\r\n\t\t\t\t\t$desktopSortablePlaces.sortable({\r\n\t\t\t\t\t\taxis: 'y'\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdesktopRow1Settings.element = 'header-area';\r\n\t\t\t\t\t$settings.attr('data-element', 'header-area');\r\n\t\t\t\t\tdesktopRow1Settings.header_type = 'horizontal';\r\n\t\t\t\t\t$this.find('span').text('Vertical Header');\r\n\t\t\t\t\t$panels.removeClass('whb-vertical-header-panel');\r\n\t\t\t\t\t$desktopSortablePlaces.sortable({\r\n\t\t\t\t\t\taxis: ''\r\n\t\t\t\t\t});\r\n\t\t\t\t\t$('#wrap').removeClass('whb-header-vertical-toggle');\r\n\t\t\t\t}\r\n\r\n\t\t\t\twhbCreateFrontendComponents();\r\n\t\t\t\twhbSaveAllData();\r\n\t\t\t\twhbDebug();\r\n\r\n\t\t\t\t// show desktop panel\r\n\t\t\t\t$tabs.find('li').removeClass('w-active');\r\n\t\t\t\t$tabs.find('li:first-child').addClass('w-active');\r\n\t\t\t\t$('.whb-tab-panel').hide();\r\n\t\t\t\t$('#desktop-view').show();\r\n\t\t\t});\r\n\r\n\t\t\t(function () {\r\n\t\t\t\tif ($('.whb-languages').length) {\r\n\t\t\t\t\t$('.whb-languages').niceSelect();\r\n\t\t\t\t\tvar $select = $('select.whb-languages');\r\n\t\t\t\t\t$select.change(function () {\r\n\t\t\t\t\t\tvar language = $(this).children(\"option:selected\").val();\r\n\t\t\t\t\t\tlocation.replace(window.location.href + '&lang=' + language);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t})();\r\n\t\t});\r\n\t}); // end document ready\r\n})(jQuery);"]}